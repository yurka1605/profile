!function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t,n){},function(e,t,n){"use strict";n.r(t);n(0);var r=window.navigator.userAgent.toLowerCase(),a="https://api.randomuser.me/1.0/?results=21&nat=gb,us&inc=gender,name,location,email,phone,picture",i=document.querySelector(".wrapper"),o=document.querySelector(".header__nav"),s=document.querySelectorAll(".header__main-tab"),c=document.querySelectorAll(".profile__tab-block"),l=document.querySelector(".avatar__img img"),u=document.querySelector(".user__full-name"),f=document.querySelector(".user__location"),d=document.querySelector(".user__input-family"),m=document.querySelector(".user__input-phone-number"),p=document.querySelector(".user__input-email"),y=document.querySelector(".user__hobbies"),g=document.querySelector(".profile__tab-block_friends"),h={city:"undefined",fullName:"undefined undefined",hobby:[],info:{family:"undefined",phone:"+7 (***) *** ** **",email:"undefined@undefined.ru"},picture:"./assets/UserPic.png"},v=document.querySelector(".overlay"),_=document.querySelector(".spinner"),b=document.querySelector(".avatar__button"),S=document.querySelector(".popup"),N=document.querySelector(".popup__button-close"),L=document.querySelector(".popup__button_state_add-hobby"),w=document.querySelector(".popup__input-field-enter"),q=document.getElementsByClassName("hobby"),E=document.querySelector(".user"),O=document.querySelector(".message-info"),I=function(e){"0"===e?(s[0].classList.remove("header__main-tab_deactivated"),s[1].classList.add("header__main-tab_deactivated"),c[0].style.display="flex",c[1].style.display="none"):(s[1].classList.remove("header__main-tab_deactivated"),s[0].classList.add("header__main-tab_deactivated"),c[1].style.display="flex",c[0].style.display="none"),sessionStorage.setItem("tabId",e)},A=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";"popup__button-close"===e.target.className||"close"===t?(S.classList.remove("popup_show"),i.classList.remove("wrapper-filter"),v.style.display="none"):(S.classList.add("popup_show"),i.classList.add("wrapper-filter"),v.style.display="block")},T=function(e,t){O.innerHTML=e,O.classList.add("".concat(t)),setTimeout(function(){O.classList.remove("".concat(t))},2e3)},U=function(e,t){var n=document.createElement("div");n.className="hobby",n.innerHTML=e,"after"===t?y.appendChild(n):y.insertBefore(n,y.firstChild)},k=function(e,t,n,r){if("info.email"===n?t.test(e.value):!t.test(e.value))return"fullName"===n&&(l.title=l.alt=e.value),e.value.trim();"info.email"!==n&&(e.value=e.value.replace(t,"")),T("".concat(r),"message-info_type_danger")},J=function(e,t){var n=e.split("."),r=t.target,a=JSON.parse(localStorage.getItem("profile"));r.addEventListener("change",function(){localStorage.setItem("profile",JSON.stringify(a))}),r.addEventListener("input",function(){"fullName"===e?a["".concat(n[0])]=k(r,/[^A-Za-zА-Яа-я\s]/g,e,"Имя может состоять только из букв!"):"info.phone"===e?a["".concat(n[0])]["".concat(n[1])]=k(r,/[^0-9\s()+-]/g,e,"Телефон не может состоять из букв!"):"info.email"===e?a["".concat(n[0])]["".concat(n[1])]=k(r,/@/g,e,"Отсутствует @!"):n.length>1?a["".concat(n[0])]["".concat(n[1])]=k(r,/[^A-Za-zА-Яа-я]/g,e,"Любые сиволы кроме буквенных недопустимы!"):a["".concat(n[0])]=k(r,/[^A-Za-zА-Яа-я\s\-]/g,e,"Любые сиволы кроме буквенных недопустимы!")})},j=function(e){var t=this;T(e,"message-info_type_danger"),this.renderDataUsers(),setTimeout(function(){T("Не удалось получить данные","message-info_type_danger"),t.getDataUser(t.url)},6e4)};function M(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function P(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function x(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var D=function(){function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._state=t,this.url=n,this.tab=a,this.currentUserAgent=/msie 10/i.test(r)||/net/i.test(r)}var t,n,r;return t=e,(n=[{key:"init",value:function(){var e=this;null===this.userProfile?(sessionStorage.setItem("tabId",this.tab),this.getDataUser()):this.renderDataUsers.apply(this,P(this.userProfile)),o.addEventListener("click",function(t){!0!==e.currentUserAgent?I(t.target.dataset.tabId):I(t.target.getAttribute("data-tab-id"))}),b.addEventListener("click",function(e){return A(e)}),N.addEventListener("click",function(e){return A(e)}),w.addEventListener("input",function(e){k(e.target,/[^A-Za-zА-Яа-я0-9\s\-]/g,"","Введены недопустимые символы в названии интереса!")}),L.addEventListener("click",function(e){var t=w.value.toLowerCase();""!==t.trim()?function(e,t){var n=JSON.parse(localStorage.getItem("hobby")),r=0;n.forEach(function(t){e===t&&r++}),0===r?(n.splice(0,0,e),localStorage.setItem("hobby",JSON.stringify(n)),U(e,"before"),w.value="",A(t,"close"),T("".concat(e," успешно добавлен в список ваших интересов"),"message-info_type_access")):T("Hobby with this name already exists","message-info_type_danger")}(t,e):T("Enter name hobby","message-info_type_danger")}),y.addEventListener("click",function(e){"user__hobbies"!==e.target.className&&function(e){for(var t=JSON.parse(localStorage.getItem("hobby")),n=0;n<q.length;n++)q[n].innerHTML===e&&(y.removeChild(q[n]),t.splice(n,1));localStorage.setItem("hobby",JSON.stringify(t)),T("".concat(e," успешно удален из списка интересов"),"message-info_type_access")}(e.target.innerHTML)}),E.addEventListener("click",function(t){"INPUT"===t.target.tagName&&(!0!==e.currentUserAgent?J(t.target.dataset.nameField,t):J(t.target.getAttribute("data-name-field"),t))})}},{key:"getDataUser",value:function(){this.currentUserAgent?function(){try{var e=new XMLHttpRequest;e.open("GET",this.url,!1),e.send(),this.parseDataUsers(JSON.parse(e.responseText).results)}catch(e){j.call(this,e)}}.call(this):function(){var e=this,t=new Request(this.url,{method:"GET",headers:new Headers,mode:"cors",cache:"default"});fetch(t).then(function(e){if(200===e.status)return e.json();throw new Error("Response status not 200!")}).then(function(t){e.parseDataUsers(t.results)}).catch(function(t){j.call(e,t)})}.call(this)}},{key:"parseDataUsers",value:function(e){var t=M(function(e,t,n,r){return r.forEach(function(r,a){0===a?(e={picture:r.picture.large,fullName:"".concat(r.name.first," ").concat(r.name.last),city:"".concat(r.location.city),info:{family:"male"===r.gender?"Холост":"Married",phone:r.phone,email:r.email}},t=["cat","car","music","sport"],localStorage.setItem("hobby",JSON.stringify(t)),localStorage.setItem("profile",JSON.stringify(e))):n.push({picture:r.picture.medium,fullName:"".concat(r.name.first," ").concat(r.name.last),city:"".concat(r.location.city),status:"male"===r.gender?"online":""})}),[e,t,n]}({},[],[],e),3),n=t[0],r=t[1],a=t[2];localStorage.setItem("friends",JSON.stringify(a)),this.renderDataUsers(n,r,a)}},{key:"renderDataUsers",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];I(sessionStorage.getItem("tabId")),function(e){l.src=e.picture,l.title=l.alt=e.fullName,u.value=e.fullName,f.value=e.city,d.value=e.info.family,m.value=e.info.phone,p.value=e.info.email}(e),y.innerHTML="",t.forEach(function(e){U(e,"after")}),function(e){e.forEach(function(e){var t=document.createElement("div");t.className="friend",t.innerHTML='\n                <img src="'.concat(e.picture,'" alt="').concat(e.fullName,'" title="').concat(e.fullName,'">\n                <div class="friend__info">\n                     <div class="friend__info-main">\n                         <a href="').concat(e.picture,'" class="friend__info-full-name">').concat(e.fullName,'</a>\n                         <span class="friend__info-city-name">c. ').concat(e.city,'</span>\n                     </div>\n                     <span class="friend__info-status">').concat(e.status,"</span>\n                </div>\n            "),g.appendChild(t)})}(n),setTimeout(function(){i.classList.remove("wrapper-filter"),_.style.display=v.style.display="none"},1e3)}},{key:"userProfile",get:function(){return 0!==this._state.length?[JSON.parse(this._state.getItem("profile")),JSON.parse(this._state.getItem("hobby")),JSON.parse(this._state.getItem("friends"))]:null}}])&&x(t.prototype,n),r&&x(t,r),e}();new D(localStorage,a,r).init(),new D(localStorage,a,r).init()}]);
//# sourceMappingURL=app.js.map